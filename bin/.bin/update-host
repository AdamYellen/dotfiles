#!/bin/bash

# TODO: Add support for Windows

# Setup my home directory how I like it
mkdir -p ~/Projects

# Update Homebrew
brew update -q

# Update tldr
TLDR=`which tldr`
if [ -x "$TLDR" ]
then
   "$TLDR" update
fi

# Run host-specific Brewfile
HOSTNAME=`hostname -s`
BREWFILE="$HOME/.sync/homebrew/Brewfile-$HOSTNAME"
if [ -f "BREWFILE" ]
then
   brew bundle check --file "$BREWFILE" || brew bundle --file "$BREWFILE"
fi

# Run OS-specific setup script
if [ `$HOME/.bin/host-is-darwin` ]
then
   if [ -x "$HOME/.bin/update-host-darwin" ]
   then
      "$HOME/.bin/update-host-darwin"
   fi
elif [ `$HOME/.bin/host-is-linux` ]
then
   if [ -x "$HOME/.bin/update-host-linux" ]
   then
      "$HOME/.bin/update-host-linux"
   fi
fi
exit 0
